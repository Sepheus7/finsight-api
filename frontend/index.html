<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSight - AI Quality Enhancement Demo</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .demo-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .demo-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .demo-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .demo-content {
            padding: 40px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .input-section textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            min-height: 150px;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .input-section textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .option-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-card:hover {
            border-color: #4facfe;
            transform: translateY(-2px);
        }

        .option-card.active {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe10, #00f2fe10);
        }

        .option-card i {
            font-size: 2rem;
            color: #4facfe;
            margin-bottom: 10px;
        }

        .option-card h3 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .option-card p {
            font-size: 0.9rem;
            color: #666;
        }

        .analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .results-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #28a745;
        }

        .result-card.warning {
            border-left-color: #ffc107;
        }

        .result-card.error {
            border-left-color: #dc3545;
        }

        .result-card h4 {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .result-card h4 i {
            margin-right: 10px;
            width: 20px;
        }

        .quality-score {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: white;
            background: conic-gradient(#28a745 var(--score-angle), #e9ecef var(--score-angle));
        }

        .score-circle.low {
            background: conic-gradient(#dc3545 var(--score-angle), #e9ecef var(--score-angle));
        }

        .score-circle.medium {
            background: conic-gradient(#ffc107 var(--score-angle), #e9ecef var(--score-angle));
        }

        .fact-check-item, .compliance-item, .context-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .fact-check-item.verified {
            border-left: 4px solid #28a745;
        }

        .fact-check-item.unverified {
            border-left: 4px solid #ffc107;
        }

        .compliance-item {
            border-left: 4px solid #dc3545;
        }

        .context-item {
            border-left: 4px solid #17a2b8;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #dc3545, #ffc107, #28a745);
            transition: width 0.3s ease;
        }

        .sample-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .sample-input {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sample-input:hover {
            background: #bbdefb;
            transform: translateY(-2px);
        }

        .sample-input h4 {
            color: #1976d2;
            margin-bottom: 8px;
        }

        .sample-input p {
            font-size: 0.9rem;
            color: #424242;
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric {
            text-align: center;
            background: #f1f3f4;
            padding: 15px;
            border-radius: 8px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4facfe;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .demo-content {
                padding: 20px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-chart-line"></i> FinSight</h1>
            <p>AI Quality Enhancement for Financial Content</p>
        </header>

        <div class="demo-container">
            <div class="demo-header">
                <h2>Live API Demo</h2>
                <p>See how FinSight enhances financial AI content with real-time fact-checking, compliance validation, and market context</p>
            </div>

            <div class="demo-content">
                <!-- Sample Inputs -->
                <div class="input-section">
                    <label for="content-input">Try these sample financial scenarios:</label>
                    <div class="sample-inputs">
                        <div class="sample-input" onclick="loadSample('investment')">
                            <h4><i class="fas fa-chart-bar"></i> Investment Advice</h4>
                            <p>Contains compliance issues and outdated claims</p>
                        </div>
                        <div class="sample-input" onclick="loadSample('market')">
                            <h4><i class="fas fa-globe"></i> Market Analysis</h4>
                            <p>Factual content that needs context enrichment</p>
                        </div>
                        <div class="sample-input" onclick="loadSample('crypto')">
                            <h4><i class="fab fa-bitcoin"></i> Crypto Discussion</h4>
                            <p>Balanced content with minimal issues</p>
                        </div>
                    </div>
                </div>

                <!-- Content Input -->
                <div class="input-section">
                    <label for="content-input">Financial AI Content to Enhance:</label>
                    <textarea id="content-input" placeholder="Enter financial AI-generated content here... (e.g., investment advice, market analysis, financial recommendations)"></textarea>
                </div>

                <!-- Enhancement Options -->
                <div class="options-grid">
                    <div class="option-card active" data-option="fact-check">
                        <i class="fas fa-search"></i>
                        <h3>Fact Checking</h3>
                        <p>Verify claims against live market data</p>
                    </div>
                    <div class="option-card active" data-option="context">
                        <i class="fas fa-plus-circle"></i>
                        <h3>Context Enrichment</h3>
                        <p>Add relevant market context</p>
                    </div>
                    <div class="option-card active" data-option="compliance">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Compliance Check</h3>
                        <p>Validate regulatory requirements</p>
                    </div>
                </div>

                <!-- Analyze Button -->
                <button class="analyze-btn" id="analyze-btn" onclick="enhanceContent()">
                    <i class="fas fa-magic"></i> Enhance with FinSight AI
                </button>

                <!-- Results Section -->
                <div class="results-section" id="results-section" style="display: none;">
                    <!-- Quality Score -->
                    <div class="quality-score">
                        <div class="score-circle" id="quality-circle">
                            <span id="quality-score">0.0</span>
                        </div>
                        <h3>Overall Quality Score</h3>
                        <p id="quality-description">Content quality assessment</p>
                    </div>

                    <!-- Performance Metrics -->
                    <div class="performance-metrics">
                        <div class="metric">
                            <div class="metric-value" id="processing-time">-</div>
                            <div class="metric-label">Processing Time (ms)</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="fact-checks-count">-</div>
                            <div class="metric-label">Claims Verified</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="context-count">-</div>
                            <div class="metric-label">Context Added</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="compliance-count">-</div>
                            <div class="metric-label">Issues Flagged</div>
                        </div>
                    </div>

                    <!-- Results Grid -->
                    <div class="results-grid">
                        <!-- Fact Checks -->
                        <div class="result-card">
                            <h4><i class="fas fa-search"></i> Fact Verification</h4>
                            <div id="fact-checks-results"></div>
                        </div>

                        <!-- Compliance Issues -->
                        <div class="result-card warning">
                            <h4><i class="fas fa-shield-alt"></i> Compliance Issues</h4>
                            <div id="compliance-results"></div>
                        </div>

                        <!-- Context Additions -->
                        <div class="result-card">
                            <h4><i class="fas fa-plus-circle"></i> Market Context</h4>
                            <div id="context-results"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'https://6akbbnz5hf.execute-api.us-east-1.amazonaws.com/dev';
        
        const sampleInputs = {
            investment: `I strongly recommend buying Apple (AAPL) stock immediately as it's currently trading at $180 per share. This is a guaranteed investment that will provide 25% returns within 6 months. Apple's market cap is $3 trillion and everyone should invest their entire portfolio in AAPL regardless of their risk tolerance. This investment is completely risk-free and will definitely make you rich.`,
            
            market: `The current inflation rate is approximately 3.2% and the Federal Reserve has maintained interest rates at 5.25-5.50%. This economic environment creates volatility in equity markets. Bitcoin has shown strong performance this year, while traditional bonds face headwinds from rising rates. Gold prices have been fluctuating based on economic uncertainty.`,
            
            crypto: `Cryptocurrency investments offer exciting opportunities for portfolio diversification. Bitcoin and Ethereum have demonstrated resilience over the past decade. These digital assets may provide portfolio benefits when properly allocated. Consider discussing with a financial advisor about whether 5-10% cryptocurrency allocation aligns with your investment goals and risk tolerance.`
        };

        function loadSample(type) {
            document.getElementById('content-input').value = sampleInputs[type];
        }

        // Toggle enhancement options
        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.toggle('active');
            });
        });

        async function enhanceContent() {
            const content = document.getElementById('content-input').value.trim();
            if (!content) {
                alert('Please enter some financial content to enhance');
                return;
            }

            const analyzeBtn = document.getElementById('analyze-btn');
            const originalText = analyzeBtn.innerHTML;
            
            // Show loading state
            analyzeBtn.innerHTML = '<div class="loading-spinner"></div>Enhancing Content...';
            analyzeBtn.disabled = true;

            // Get selected options
            const factCheck = document.querySelector('[data-option="fact-check"]').classList.contains('active');
            const context = document.querySelector('[data-option="context"]').classList.contains('active');
            const compliance = document.querySelector('[data-option="compliance"]').classList.contains('active');

            try {
                const response = await fetch(`${API_BASE_URL}/enhance`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        ai_response: {
                            content: content,
                            agent_id: 'frontend_demo',
                            timestamp: new Date().toISOString()
                        },
                        enrichment_level: 'comprehensive',
                        fact_check: factCheck,
                        add_context: context
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                displayResults(result);

            } catch (error) {
                console.error('Error:', error);
                alert('Error enhancing content. Please check the console for details.');
            } finally {
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
            }
        }

        function displayResults(result) {
            // Show results section
            document.getElementById('results-section').style.display = 'block';
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });

            // Update quality score
            const qualityScore = result.quality_score || 0;
            const scoreElement = document.getElementById('quality-score');
            const circleElement = document.getElementById('quality-circle');
            const descriptionElement = document.getElementById('quality-description');

            scoreElement.textContent = qualityScore.toFixed(2);
            
            // Update score circle
            const angle = qualityScore * 360;
            circleElement.style.setProperty('--score-angle', `${angle}deg`);
            
            // Set circle color based on score
            circleElement.className = 'score-circle';
            if (qualityScore < 0.6) {
                circleElement.classList.add('low');
                descriptionElement.textContent = 'Content needs significant improvement';
            } else if (qualityScore < 0.8) {
                circleElement.classList.add('medium');
                descriptionElement.textContent = 'Good content with minor issues';
            } else {
                descriptionElement.textContent = 'Excellent content quality';
            }

            // Update performance metrics
            document.getElementById('processing-time').textContent = Math.round(result.processing_time_ms || 0);
            document.getElementById('fact-checks-count').textContent = (result.fact_checks || []).length;
            document.getElementById('context-count').textContent = (result.context_additions || []).length;
            document.getElementById('compliance-count').textContent = (result.compliance_flags || []).length;

            // Display fact checks
            displayFactChecks(result.fact_checks || []);
            
            // Display compliance issues
            displayComplianceIssues(result.compliance_flags || []);
            
            // Display context additions
            displayContextAdditions(result.context_additions || []);
        }

        function displayFactChecks(factChecks) {
            const container = document.getElementById('fact-checks-results');
            
            if (factChecks.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No financial claims detected for verification</p>';
                return;
            }

            container.innerHTML = factChecks.map(fc => `
                <div class="fact-check-item ${fc.verified ? 'verified' : 'unverified'}">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <i class="fas ${fc.verified ? 'fa-check-circle' : 'fa-exclamation-triangle'}" 
                           style="color: ${fc.verified ? '#28a745' : '#ffc107'}; margin-right: 8px;"></i>
                        <strong>${fc.verified ? 'Verified' : 'Unverified'}</strong>
                    </div>
                    <p style="margin-bottom: 10px;">${fc.claim}</p>
                    <div style="font-size: 0.9rem; color: #666;">
                        <div>Source: ${fc.source || 'N/A'}</div>
                        <div>Confidence: ${(fc.confidence || 0).toFixed(2)}</div>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${(fc.confidence || 0) * 100}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function displayComplianceIssues(complianceFlags) {
            const container = document.getElementById('compliance-results');
            
            if (complianceFlags.length === 0) {
                container.innerHTML = '<p style="color: #28a745; text-align: center; padding: 20px;"><i class="fas fa-check"></i> No compliance issues detected</p>';
                return;
            }

            container.innerHTML = complianceFlags.map(flag => `
                <div class="compliance-item">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <i class="fas fa-exclamation-triangle" style="color: #dc3545; margin-right: 8px;"></i>
                        <strong>Compliance Issue</strong>
                    </div>
                    <p>${flag}</p>
                </div>
            `).join('');
        }

        function displayContextAdditions(contextAdditions) {
            const container = document.getElementById('context-results');
            
            if (contextAdditions.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No additional context added</p>';
                return;
            }

            container.innerHTML = contextAdditions.map(context => `
                <div class="context-item">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <i class="fas fa-info-circle" style="color: #17a2b8; margin-right: 8px;"></i>
                        <strong>Market Context</strong>
                    </div>
                    <p>${context}</p>
                </div>
            `).join('');
        }

        // Load default sample on page load
        window.addEventListener('load', () => {
            loadSample('investment');
        });
    </script>
</body>
</html>
